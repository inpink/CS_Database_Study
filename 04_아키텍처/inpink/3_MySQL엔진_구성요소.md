# MySQL엔진 구성요소
　   
> 플러그인과 컴포넌트

　   
💙 플러그인　   
MySQL 서버에서는 다양한 기능을 플러그인 형태로 가져와서 사용할 수 있다.　   
검색어 파서, 사용자 인증, 스토리지 엔진 등이 플러그인으로 구현되어 제공된다.　   
각 플러그인 핸들러 API를 구현하면, 사용자나 기업에서 원하는 형태의 플러그인을 만들어 사용할 수도 있다.　   
　   
![image](https://github.com/inpink/CS_Database_Study/assets/108166692/cccecc0f-e7b8-43c6-9b8f-46e00d31b6d9)　   
=> MySQL 서버에 설치되어 있는 플러그인 목록을 확인한다. 　   
　   
　   
💙 컴포넌트　   
MySQL 8.0부터는 플러그인 아키텍처를 **컴포넌트**가 대체한다. 　   
컴포넌트는, 플러그인의 아래 단점들을 보완한다.　   
　   
- 기본적으로 플러그인끼리는 소통이 불가능　   
- 플러그인은 MySQL 서버의 변수나 함수를 직접 호출한다. 캡슐화를 하지 않기 때문에, 보안 문제가 있을 수 있다.　   

　   
예) 3장에서 설치해준 "비밀번호 검증 기능(Validate_password)"이 원래는 플러그인 형태로 제공되었지만, MySQL 8.0버전부터 컴포넌트로 바뀌었다.　   
　   
![image](https://github.com/inpink/CS_Database_Study/assets/108166692/d8ee1bab-afe7-408e-b4dd-5184f3eac09c)　   
=> 설치된 모든 컴포넌트를 확인할 수 있다.　   
=> 3장에서 설치해준 validate_password component를 확인할 수 있다.　   
　   
　   
***
　   
> 쿼리 실행 구조

91p 그림 4.6를 참고하자.　   
　   
MySQL 서버는 사용자로부터 SQL 요청을 받아서, MySQL 엔진에게 넘겨준다. 　   
MySQL 엔진은 쿼리를 실행하여 스토리지 엔진에서 데이터를 읽고 저장한다. 그리고, 실행 결과를 반환한다.　   
　   
더 자세한 쿼리 처리 과정을 구성요소의 관점에서 보도록 하자.　   
　   
**MySQL 엔진**은 받은 쿼리를 처리할 때, **쿼리 파서 -> 전처리기 -> 옵티마이저 -> 쿼리실행기**의 단계로 이루어진다.　   

　   
> 쿼리 파서

쿼리를 **토큰**으로 분리해 **트리 형태**로 만든다. 　   
이 때, **쿼리의 문법 오류**를 발견할 수 있다. 　   
　   
예)　   
~~~
SELECT FirstName, LastName FROM Customers WHERE Country = 'USA' AND Age > 30;
~~~
　   
~~~
         SELECT
         /    |    \
  FirstName  ,  LastName
                  |
               FROM
               /   \
       Customers   WHERE
                    /   \
               Country   AND
                        /   \
                     =   Age
                    / \
                 'USA'  >
                           / \
                          30
~~~
　   
　   
　  　    
> 전처리기

파서 트리에 있는 내용 중, 존재하지 않거나 권한상 사용할 수 없는 토큰(테이블 이름, 열 이름, 함수명 등)을 걸러낸다.　   
　   
　   
> 옵티마이저

입력된 SQL 쿼리의 실행 계획을 최적화하여 데이터베이스 성능을 향상시키는 것이 주요 목적이다.　   
저렴한 비용으로 빠르게 처리하기 위한 DBMS의 두뇌에 해당된다.　   
그런 만큼, 옵티마이저의 역할을 중요하고 영향 범위도 매우 넓다.　   
　   
쿼리 분석, 인덱스 선택, 조인 순서 결정, 실행 계획 생성, 동적 최적화, 비용 계산, 실행 계획 선택　   
등의 작업을 한다.　   
　   
하지만 모든 상황에서 옵티마이저가 항상 완벽한 최적화를 보장하는 것은 어려울 수 있기에,　   
때로는 사용자가 직접 SQL 쿼리를 개선하거나 인덱스를 조정하는 등의 작업이 필요하다.　   
　   

　   
> 실행 엔진

MySQL 서버의 각 구성요소들은 핸들러를 통해 요청을 받는다.　   
이 때, **실행 엔진**은 핸들러에서 요청을 전달하고, 핸들러로부터 받은 실행 결과를 다른 핸들러에게 전달하는 역할을 한다. 　   
서로를 연결하는 역할을 맡는다.　   
　   
　   
　   
> 쿼리 캐시



