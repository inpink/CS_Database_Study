## MySQL ì‹œìŠ¤í…œ ë³€ìˆ˜

MySQL ì„œë²„ëŠ” ì„¤ì • íŒŒì¼ì˜ ë‚´ìš©ì„ ì½ì–´ í•„ìš”í•œ ì„¤ì •ë“¤ì„ í•œë‹¤.ã€€   
ì´ ë•Œ, í•„ìš”í•œ ê°’ë“¤ì„ **ë³„ë„ì˜ ë³€ìˆ˜ì— ì €ì¥**í•´ë‘ëŠ”ë°, ì´ë¥¼ **ì‹œìŠ¤í…œ ë³€ìˆ˜(System Variables)** ë¼ê³  í•œë‹¤.ã€€   
ã€€   
ì‹œìŠ¤í…œ ë³€ìˆ˜ë“¤ì€ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.ã€€   
~~~
mysql > SHOW GLOBAL VARIABLES;
ë˜ëŠ”
mysql > SHOW VARIABLES;
~~~
ã€€   
ë‚´ê°€ ì›í•˜ëŠ” ë³€ìˆ˜ ëª…ë§Œ ê²€ìƒ‰í•˜ë ¤ë©´, ì•„ë˜ì™€ ê°™ì´ Like ì—°ì‚°ìë¥¼ ì´ìš©í•˜ì. ã€€   
![image](https://github.com/inpink/CS_Database_Study/assets/108166692/831d9637-0a49-41eb-a04b-a6f991a056bd)ã€€   
ã€€   
ã€€   
> ì‹œìŠ¤í…œ ë³€ìˆ˜ ì¤‘ 'GLOBAL VARIABLES'ê³¼ 'VARIABLES'ì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¼ê¹Œ?

ìš°ì„  ì‹œìŠ¤í…œ ë³€ìˆ˜ë“¤ì˜ ëª©ë¡ì´ ë‹´ê¸´ documentataionë¥¼ ë³´ê³ ì˜¤ì.ã€€   
https://dev.mysql.com/doc/refman/8.0/en/server-system-variable-reference.html ã€€   ã€€   
ã€€   
ìœ„ docs ì— ì í˜€ìˆëŠ” ì‹œìŠ¤í…œ ë³€ìˆ˜ì˜ 5ê°€ì§€ ì†ì„±ì„ ì•Œì•„ë³´ì.ã€€   
- Cmd-Line : Yesë©´, MySQL ì„œë²„ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì´ ì‹œìŠ¤í…œ ë³€ìˆ˜ì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.ã€€   
- Option file : ì„¤ì • íŒŒì¼(my.cnf)ë¡œ ì œì–´í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ì¸ì§€ì˜ ì—¬ë¶€ì´ë‹¤.ã€€   
- System Var : ì‹œìŠ¤í…œ ë³€ìˆ˜ì¸ì§€ ìœ ë¬´ì´ë‹¤. ë‹¹ì—°íˆ ìœ„ì—ì„  ë‹¤ Yesì´ë‹¤.ã€€   
  ì˜ˆì „ì—ëŠ” ë³€ìˆ˜ëª…ì— '-'ë¥¼ ì“°ê¸°ë„ í•˜ê³  '_'ë¥¼ ì“°ê¸°ë„ í–ˆëŠ”ë°, MySQL 8.0ë²„ì „ë¶€í„° ' _ 'ë¥¼ êµ¬ë¶„ìë¡œ ì‚¬ìš©í•˜ë„ë¡ í†µì¼ë˜ì—ˆë‹¤.ã€€   
- Var Scope(ë³€ìˆ˜ ë²”ìœ„): ë³€ìˆ˜ê°€ ì–´ë–¤ ë²”ìœ„ì—ì„œ ì„¤ì •ë  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. Global, Session(ì»¤ë„¥ì…˜), Bothê°€ ìˆë‹¤.ã€€   
  ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ì—ì„œ ë” ì•Œì•„ë³´ì.ã€€   
- Dynamic :  ëŸ°íƒ€ì„ ì¤‘ì— ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. Dynamicê³¼ Staticì´ ìˆìœ¼ë©°,ã€€   
  ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ì—ì„œ ë” ì•Œì•„ë³´ì.ã€€   
ã€€   
ğŸŒŸì‹œìŠ¤í…œ ë³€ìˆ˜ëŠ” í¬ê²Œ ì•„ë˜ì™€ ê°™ì´ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤. (Var Scope, Dynamic ì˜µì…˜)ã€€   
![image](https://github.com/inpink/CS_Database_Study/assets/108166692/02c8df40-2bf8-45a1-9bb9-32a21703802a)ã€€   


> MySQL ì‹œìŠ¤í…œ ë³€ìˆ˜ Var Scope(ë³€ìˆ˜ ë²”ìœ„)

ë³€ìˆ˜ê°€ ì–´ë–¤ ë²”ìœ„ì—ì„œ ì„¤ì •ë  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. Global, Session(ì»¤ë„¥ì…˜), Bothê°€ ìˆë‹¤.

- GLOBAL ë²”ìœ„
  : í•´ë‹¹ ë³€ìˆ˜ëŠ” MySQL ì„œë²„ ì „ì²´ì— ì˜í–¥ì„ ë¯¸ì¹œë‹¤. ì¦‰, ëª¨ë“  ì„¸ì…˜ ë° ì—°ê²°ì— ëŒ€í•œ ê³µí†µ ì„¤ì •ì´ë‹¤.
  MySQL ì„œë²„ê°€ ì‹œì‘ë  ë•Œ ì„¤ì •ë˜ë©°, **SET GLOBAL** ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ëŸ°íƒ€ì„ ì¤‘ì— ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
  my.cnf ë˜ëŠ” my.iniì™€ ê°™ì€ MySQL ì„¤ì • íŒŒì¼ì— ì„¤ì •ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
  ì˜ˆ) InnoDB ë²„í¼ í’€ í¬ê¸°(innodb_buffer_pool_size)

- SESSION ë²”ìœ„
  : í•˜ë‚˜ì˜ MySQL ì„œë²„ì—ëŠ” ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ ì ‘ì†í•  ìˆ˜ ìˆëŠ”ë°, í•´ë‹¹ ë³€ìˆ˜ëŠ” ê° MySQL ì„¸ì…˜(ì»¤ë„¥ì…˜, í´ë¼ì´ì–¸íŠ¸)ë§ˆë‹¤ ë‹¤ë¥´ê²Œ ì„¤ì •í•˜ì—¬ ê° ì„¸ì…˜ì—ë§Œ ì˜í–¥ì„ ì¤€ë‹¤. ì¦‰, í•´ë‹¹ ì„¸ì…˜ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì •ì´ë‹¤.
  ì„¸ì…˜ì´ ì‹œì‘ë  ë•Œ ì„¤ì •ë˜ë©°, ì„¸ì…˜ì´ ì¢…ë£Œë  ë•Œê¹Œì§€ ìœ ì§€ëœë‹¤. **SET** ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ ì„¸ì…˜ ë‚´ì—ì„œ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
  **ì»¤ë„¥ì…˜ë³„ë¡œ ì„¤ì •ê°’ì„ ì„œë¡œ ë‹¤ë¥´ê²Œ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë©°, í•œë²ˆ ì—°ê²°ëœ ì»¤ë„¥ì…˜ì˜ ì„¸ì…˜ ë³€ìˆ˜ëŠ” ì„œë²„ì—ì„œ ê°•ì œë¡œ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. MySQL ì„œë²„ ì„¤ì • íŒŒì¼ì— ì´ˆê¸°ê°’ì„ ëª…ì‹œí•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.** 
  ì˜ˆ) innodb_parallel_read_threads

- BOTH ë²”ìœ„
  : ì„¤ì •ëœ ë³€ìˆ˜ëŠ” GLOBALê³¼ SESSION ë‘ ë²”ìœ„ì— ëª¨ë‘ ì˜í–¥ì„ ë¯¸ì¹œë‹¤.
  MySQL ì„œë²„ì˜ ì „ì—­ ì„¤ì • ê°’ê³¼ í˜„ì¬ ì„¸ì…˜ì˜ ì„¤ì • ê°’ ëª¨ë‘ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
  SET GLOBALë¡œ ì „ì—­ ì„¤ì • ê°’ì„ ë³€ê²½í•˜ë©´ ëª¨ë“  ì„¸ì…˜ì— ì ìš©ë˜ê³ , SETìœ¼ë¡œëŠ” í˜„ì¬ ì„¸ì…˜ì˜ ì„¤ì • ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
  MySQL ì„œë²„ ì„¤ì • íŒŒì¼ì— ì´ˆê¸°ê°’ì„ ëª…ì‹œí•  ìˆ˜ ìˆë‹¤.

  
Global, Session, Bothë“¤ì˜ ì°¨ì´ì ì„ ë”ìš± êµ¬ë¶„í•˜ìë©´,
Globalì€ ì„œë²„ ì „ì²´ì ìœ¼ë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ë¯€ë¡œ **ì„œë²„ ìì²´ì— ê´€ë ¨ëœ ì„¤ì •**ì´ ë§ë‹¤. ì„¤ì • íŒŒì¼ì— ì§€ì •í•´ë‘˜ ìˆ˜ ìˆë‹¤.
Sessionì€ ì„¤ì • íŒŒì¼ì— ì§€ì •í•´ë‘˜ ìˆ˜ ì—†ìœ¼ë©°, ì»¤ë„¥ì…˜ì´ ë§Œë“¤ì–´ì§€ëŠ” ìˆœê°„ë¶€í„° **í•´ë‹¹ ì»¤ë„¥ì…˜ì—ì„œë§Œ ìœ íš¨**í•œ ë³€ìˆ˜ì´ë‹¤.
BothëŠ” MySQL ì„œë²„ì˜ ì„¤ì • íŒŒì¼ì— ì´ˆê¸°ê°’ì„ ëª…ì‹œí•´ë‘ê³ , ì»¤ë„¥ì…˜ì´ ë§Œë“¤ì–´ì§€ëŠ” ìˆœê°„ì— ê° ì»¤ë„¥ì…˜ìœ¼ë¡œ ê°’ì´ í• ë‹¹ëœë‹¤. **ë³€ìˆ˜ì˜ ê°’ì„ ë³€ê²½í•˜ë©´ ì „ì—­ ì„¤ì • ê°’ê³¼ í˜„ì¬ ì„¸ì…˜ì˜ ì„¤ì • ê°’ì´ ëª¨ë‘ ë³€ê²½ëœë‹¤.**


> MySQL ì‹œìŠ¤í…œ ë³€ìˆ˜ Dynamic

ì„œë²„ê°€ ê¸°ë™ ì¤‘ì¸ ìƒíƒœì—ì„œ ë³€ìˆ˜ ê°’ì„ ë³€ê²½ ê°€ëŠ¥í•œì§€ ì—¬ë¶€ì— ë”°ë¼
ê°€ëŠ¥í•˜ë©´ ë™ì  ë³€ìˆ˜(Dynamic), ë¶ˆê°€ëŠ¥í•˜ë©´ ì •ì  ë³€ìˆ˜(Static)ì´ë‹¤.

ìš°ë¦¬ëŠ” ìœ„ì—ì„œ SHOW ëª…ë ¹ì„ ì´ìš©í•˜ì—¬ MySQL ì„œë²„ì— ì ìš©ëœ ë³€ìˆ˜ê°’ì„ í™•ì¸í–ˆë‹¤.
ê·¸ë¦¬ê³  SETì„ ì´ìš©í•˜ì—¬ ê°’ì„ ë°”ê¿€ ìˆ˜ ìˆì—ˆë‹¤.
ì´ ë•Œ, ë°”ë¡œ ê°’ì´ ì ìš©ë˜ëŠ” ê²ƒì´ Dynamic, ì„œë²„ë¥¼ ì¬ì‹œì‘í•´ì•¼ë§Œ ì ìš©ë˜ëŠ” ê²ƒì´ Staticì´ë‹¤.

DYNAMIC (ë™ì  ë³€ìˆ˜)
  : ëŸ°íƒ€ì„ ì¤‘ì— ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜.
  ë³€ìˆ˜ ê°’ì„ ë³€ê²½í•˜ë ¤ë©´ MySQL ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•Šê³ ë„ SET ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
  ì´ëŸ¬í•œ ë³€ìˆ˜ëŠ” ë³€ê²½ì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ê±°ë‚˜ ëŸ°íƒ€ì„ ì¤‘ì— ìµœì í™”ë‚˜ íŠœë‹ì„ ìˆ˜í–‰í•´ì•¼ í•  ë•Œ ìœ ìš©í•˜ë‹¤.

STATIC (ì •ì  ë³€ìˆ˜):
  MySQL ì„œë²„ê°€ ì‹œì‘ë  ë•Œ ì„¤ì •ë˜ë©°, ëŸ°íƒ€ì„ ì¤‘ì— ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ë³€ìˆ˜.
  ë³€ìˆ˜ ê°’ì„ ë³€ê²½í•˜ë ¤ë©´ MySQL ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ì—¬ ìƒˆë¡œìš´ ì„¤ì • ê°’ì„ ì ìš©í•´ì•¼ í•œë‹¤.
  ì´ëŸ¬í•œ ë³€ìˆ˜ëŠ” MySQL ì„œë²„ê°€ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•´ì•¼ í•˜ê±°ë‚˜ ë³€ê²½ ë¹ˆë„ê°€ ë‚®ì„ ë•Œ ìœ ìš©í•˜ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, max_connections ë³€ìˆ˜ëŠ” DYNAMIC ë³€ìˆ˜ë‹¤.
ë”°ë¼ì„œ MySQL ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•Šê³ ë„ ëŸ°íƒ€ì„ ì¤‘ì— ì—°ê²° ì œí•œ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
ë°˜ë©´ datadir ë³€ìˆ˜ëŠ” STATIC ë³€ìˆ˜ë¡œ, ì´ ë³€ìˆ˜ ê°’ì„ ë³€ê²½í•˜ë ¤ë©´ MySQL ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•œë‹¤.

ğŸŒŸ í•˜ì§€ë§Œ, SET ëª…ë ¹ì„ í†µí•´ ë³€ê²½ë˜ëŠ” ì‹œìŠ¤í…œ ë³€ìˆ˜ê°’ì€ ì„¤ì •íŒŒì¼ì— ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤. í˜„ì¬ ê¸°ë™ ì¤‘ì¸ MySQL ì¸ìŠ¤í„´ìŠ¤ì—ë§Œ ìœ íš¨í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.
=> MySQL ì„œë²„ê°€ ì¬ì‹œì‘ë˜ë©´, ë‹¤ì‹œ ì„¤ì • íŒŒì¼ì— ìˆëŠ” ê°’ìœ¼ë¡œ ëŒì•„ê°€ë²„ë¦°ë‹¤! 
=> ì˜êµ¬íˆ ì ìš©í•´ì£¼ë ¤ë©´, ì„¤ì • íŒŒì¼ì— ìˆëŠ” ê°’ë„ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.
=> MySQL 8.0 ë²„ì „ë¶€í„°ëŠ” **SET PERSIST, SET PERSIST ONLY** ëª…ë ¹ì–´ë¥¼ ì œê³µí•´ì¤˜ì„œ, **ì˜êµ¬ì ìœ¼ë¡œ ë³€ê²½ê°’ì´ ì ìš©ë  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤**


> SET PERSIST

ë™ì  ë³€ìˆ˜ì˜ ê²½ìš° ë³€ê²½í•˜ë©´, í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì„œë²„ì— ë°”ë¡œ ì ìš©ëœë‹¤ê³  í–ˆë‹¤.
ê·¸ëŸ°ë° SETìœ¼ë¡œ ë³€ê²½í•œ ë’¤ ì„¤ì •íŒŒì¼ì—ë„ ê°’ì„ ë°”ê¿”ì£¼ëŠ” ê²ƒì„ ìŠì–´ì„œ ì„œë¹„ìŠ¤ ì¥ì• ê°€ ì¼ì–´ë‚  ë•Œê°€ ìˆë‹¤.
ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ëª…ë ¹ì–´ê°€ SET PERSISTì´ë‹¤.

**ë™ì  ë³€ìˆ˜ì˜ ê°’ì„ ì¦‰ì‹œ ë³€ê²½í•˜ë©°, ë³„ë„ì˜ mysqld-autu.cnf íŒŒì¼ì— ì €ì¥í•´ë‘”ë‹¤. ì„œë²„ê°€ êµ¬ë™ë  ë•Œ ì´ íŒŒì¼ë˜í•œ ì°¸ê³ í•˜ê¸° ë•Œë¬¸ì—, ì˜êµ¬íˆ ë³€ê²½ì´ ì ìš©ë˜ê²Œ ëœë‹¤**

ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
~~~
set persist max_connections=5000;
~~~


> SET PERSIST ONLY

**SET PERSIST, SET PERSIST ONLY** ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€ê²½ëœ ì‹œìŠ¤í…œ ë³€ìˆ˜ëŠ”, my.cnf íŒŒì¼ì´ ì•„ë‹Œ mysqld-autu.cnf íŒŒì¼ì— ì €ì¥ëœë‹¤.
ì¡°íšŒí•˜ëŠ” ë°©ë²•


44p set persist ê´€ë ¨  ì¡°íšŒ
performance_schema.varaibles_info  : performance_schema.variables_info í…Œì´ë¸”ì€ ì´ëŸ¬í•œ ì‹œìŠ¤í…œ ë³€ìˆ˜ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ ê° ì‹œìŠ¤í…œ ë³€ìˆ˜ì˜ ì´ë¦„, ë°ì´í„° í˜•ì‹, ì„¤ëª… ë“±ì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


> ë°ì´í„°ë² ì´ìŠ¤ vs í…Œì´ë¸”

10. ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE TESTDB;

11. ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡ í™•ì¸
SHOW DATABASES;




set persist_onlyë¡œ max_connectionsë¥¼ ë°”ê¾¼ ë’¤, 
set persist_onlyë‚˜ set persistë¡œ ë³€ê²½ëœ ì‹œìŠ¤í…œ ë³€ìˆ˜ë¥¼ ì¡°íšŒí•¨. 
![image](https://github.com/inpink/CS_Database_Study/assets/108166692/572a9878-d395-4932-9c3a-540327f20f0d)
9ë²ˆ ì°¸ê³ í•´ì„œ ì„¤ëª… ì¶”ê°€ ì˜ˆì •


![image](https://github.com/inpink/CS_Database_Study/assets/108166692/3776479e-13c1-4c4c-a308-892f12fa7860)
![image](https://github.com/inpink/CS_Database_Study/assets/108166692/9026aba3-0b31-4a13-9721-d288e51d4677)

![image](https://github.com/inpink/CS_Database_Study/assets/108166692/b38ee026-0693-4483-8035-7a2c0c818974)
